<!DOCTYPE html>
<!--
 * Smart Netflix Subtitles
 * Copyright (C) 2025 Based on Subadub by Russel Simmons
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <https://www.gnu.org/licenses/>.
 -->
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <h2>Smart Netflix Subtitles</h2>

    <!-- Language Selection -->
    <div class="form-group">
      <label for="target-language">Target Language (Learning):</label>
      <select id="target-language" disabled>
        <option value="">Select a language</option>
        <option value="fr">French</option>
        <option value="pt-BR">Brazilian Portuguese</option>
      </select>
    </div>

    <div class="form-group">
      <label for="native-language">Native Language:</label>
      <select id="native-language" disabled>
        <option value="">Select a language</option>
        <!-- Dynamic options populated by JavaScript -->
      </select>
      <div class="language-help-text">If your language appears as Undetected, try turning on the Netflix subtitles in that language so it can be detected.</div>
    </div>

    <div class="form-group">
      <div class="vocab-header">
        <label>Vocabulary Level</label>
        <button id="test-level-btn" class="test-level-btn">Test my level</button>
      </div>

      <div class="vocab-card">
        <div id="vocab-display" class="vocab-text">
          <!-- Dynamically populated by JavaScript -->
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="form-group">
      <button id="process-btn" disabled>Process Subtitles</button>
    </div>

    <!-- Legacy Download Section (Hidden by default) -->
    <div id="legacy-section" class="legacy-section" style="display: none;">
      <hr>
      <h3>Legacy Download</h3>
      <div class="form-group">
        <label for="subtitle-select">Select Subtitle:</label>
        <select id="subtitle-select" disabled>
          <option value="">Loading...</option>
        </select>
      </div>
      <div class="form-group">
        <button id="download-btn" disabled>Download</button>
      </div>
    </div>
    
    <!-- Status Messages -->
    <div id="status-message" class="status"></div>
    <div id="loading-indicator" class="loading-indicator" style="display: none;">
      <div class="spinner"></div>
      <span>Subtitles loading... (this may take up to 20 seconds)</span>
    </div>

    <!-- Feedback Banner -->
    <div class="feedback-banner">
      Any feedback? Please, send me an email at <a href="mailto:unducamp.pro@gmail.com">unducamp.pro@gmail.com</a>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
